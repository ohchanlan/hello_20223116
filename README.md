## 20223116 오찬란
---
- 리눅스 명령어 top
- 리눅스 명령어 ps
- 리눅스 명령어 jobs
- 리눅스 명령어 kill
- vim 에디터에서의 매크로 사용법
---
**리눅스 명령어 top**

실시간으로 CPU 사용률을 체크해주는 명령어 (윈도우의 작업관리자와 비슷)

리눅스를 사용하는 서버의 성능이나 현재 돌아가고 있는 상황을 볼 때 사용

![top](https://user-images.githubusercontent.com/106640318/171798983-cae067ed-1b93-41c3-994a-c605e082c51f.jpg)

첫 번째 줄 -> 시스템 현재시간, 서버 구동시간, 현재 접속 유저 수, 로드 에버리지(1분, 5분, 15분 동안 시스템 부하량 평균값) 출력

두 번째 줄 -> 현재 프로세스들의 상태(Tasks)를 나타내며 전체 프로세스 수(total), 실행 중 수(running), 대기 중 수(sleeping), 종료 수(stopped), 좀비 수(zombie) 출력

세 번째 줄 -> CPU 사용량을 나타내며 사용자 프로세스(us), 커널 프로세스(sy), 프로세스 우선순위(ni), 사용 안 하는 비율(id), IO 완료 기다리는 비율(wa), 소프트웨어 인터럽트(si), VM에 할당된 비율(st) 출력

네 번째, 다섯 번째 줄 -> RAM의 메모리 영역과 Swap 메모리 영역을 나타내며 총 메모리 양(total), 사용 가능 메모리 양(free), 사용 중인 메모리 양(used), 커널 버퍼 사용 메모리 양(buff/cache), 물리적 메모리 양(avail Mem) 출력

***top 명령어 옵션***

shift + p : CPU 사용률이 높은 프로세스 순서대로 표시

shift + m : 메모리 사용률이 높은 프로세스 순서대로 표시

shift + t : 프로세스가 돌아가고 있는 시간 순서대로 표시

a : 메모리 사용량에 따라 정렬

b : Batch 모드 작동

c : 명령행 / 프로그램 이름 토글

s : 보안 모드 작동

S : 누적 시간 모드 토글

---

**리눅스 명령어 ps**

현재 실행중인 프로세스 목록을 보여주는 명령어

아파치, 오라클 등 프로그램 프로세스가 정상적인지 확인하거나 비정상적인 프로세스가 올라왔는지 확인하는 등 리눅스 관리 전반적으로 많이 사용되는 명령어

주로 파이프라인, grep 명령어와 함께 사용하여 특정 프로세스를 확인하는 데 사용됨

***ps 명령어 옵션***

ps의 옵션은 전통적인 유닉스인 System V, BSD, GNU에 따라 결과가 다르게 나타나서 표기법에도 차이를 보임

옵션 사용 시 System V 계열은 대시(-)를 사용하고 BSD 계열은 대시(-)를 사용하지 않음, GNU에서의 옵션 표기를 두 개의 대시(--)를 사용함 -> 원하는 프로세스의 상태를 출력하려면 정확한 옵션 사용이 중요함

![ps](https://user-images.githubusercontent.com/106640318/171799640-567601a4-ffbf-4ebc-956c-f36f11e1ecb0.jpg)

예를 들어, 옵션 중 'a'가 있고 '-a'가 있는데 이 둘은 다름

-A : 모든 프로세스 출력

a(BSD계열) : 터미널과 연관된 프로세스 출력, 보통 x 옵션과 연계하여 모든 프로세스를 출력할 때 사용

-a : 세션 리더를 제외하고 데몬 프로세스처럼 터미널에 종속되지 않은 모든 프로세스 출력

-e : 커널 프로세스를 제외한 모든 프로세스 출력

-f : 풀 포맷으로 보여줌, 유닉스 스타일로 출력해주는 옵션으로 UID, PID, PPID 등이 함께 표시됨

-M : 64비트 프로세스들을 보여줌

-p : 특정 PID를 지정할 때 사용

-u : 특정 사용자의 프로세스 정보를 확인할 때 사용, 사용자를 지정하지 않으면 현재 사용자를 기준으로 정보 출력

System V 계열에서는 'ps -ef'를 가장 많이 사용

BSD 계열에서는 'ps aux'를 가장 많이 사용

***top 명령어와 ps 명령어 차이점***

| |top|ps|
|---|---|---|
|CPU|proc에서 일정 주기로 합산한 CPU 사용률| ps 한 시점 proc에서 검색한 CPU 사용률|

---

**리눅스 명령어 jobs**

현재 세션의 작업 상태(작업이 중지된 상태, 백그라운드로 진행 중인 상태 등)를 출력하는 명령어

![jobs](https://user-images.githubusercontent.com/106640318/171800745-c4cbb03d-8f40-4da1-91db-6f4644293a51.jpg)

***jobs로 출력되는 백그라운드 작업의 상태값***

- running : 작업이 계속 진행 중임

- Done : 작업이 완료되어 0을 반환

- Done(code) : 작업이 종료되었으며 0이 아닌 코드를 반환

- Stopped : 작업이 일시 중단

***jobs 명령어 옵션***

-l : 프로세스 그룹 ID를 state 필드 앞에 출력

-n : 프로세스 그룹 중에 대표 프로세스 ID를 출력

-p : 각 프로세스 ID에 대해 한 행씩 출력

command : 지정한 명령어를 실행

---

**리눅스 명령어 kill**

프로세스를 죽이는(종료시키는) 명령어

프로세스에 시그널을 보내 원하는 작업을 하게 하는 명령어

시그널 : 인터럽트의 일종으로 어떤 이벤트의 발생을 프로세스에게 알려주는 것, 리눅스에서 프로세스끼리 통신할 때 사용

***kill 명령어 옵션***

-l : 시그널의 종류 출력

![kill](https://user-images.githubusercontent.com/106640318/171801128-19ee26f6-1f59-4c1c-b954-599e139648f6.jpg)

시그널의 목록은 운영체제 환경마다 다름

-s signal : 시그널의 이름 지정

-s 옵션으로 시그널을 지정하지 않으면 기본 시그널 값이 정상종료(SIGTERM,15)

프로세스를 안전하게 종료하기 위해서는 'kill -9 pid', 'kill -SIGKILL pid' 형태의 프로세스 강제종료를 권장하지 않음 (데이터 유실 위험)

---

**vim 에디터에서의 매크로 사용법**

매크로 : 같은 동작을 반복하게 해주는 것 (이전 명령 반복)

***매크로 기능***

- q + a : a 키에 recording 시작

- q : recording 종료

- @a : 1회 실행

- @@ : 방금 실행한 매크로 실행

- 10@a : 매크로 10회 실행
